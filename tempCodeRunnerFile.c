(cb->head + 1) % BUFFER_SIZE;